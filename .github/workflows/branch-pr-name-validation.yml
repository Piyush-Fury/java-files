name: Validate Branch and PR Naming

on:
  push:
    branches:
      - '*'
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  check-naming-convention:
    runs-on: ubuntu-latest
    
    steps:
      # Step to checkout the code
      - name: Checkout code
        uses: actions/checkout@v3
        
      # Check branch name for JIRA ticket
      - name: Check branch name for JIRA ticket
        run: |
          BRANCH_NAME=$(git rev-parse --abbrev-ref HEAD)
          echo "Branch name: $BRANCH_NAME"
          # Add your naming convention check here

      # Check PR title for JIRA ticket
      - name: Check PR title for JIRA ticket
        run: |
          PR_TITLE=$(gh pr view --json title -q ".title" || echo "No PR found")
          if [[ "$PR_TITLE" == "No PR found" ]]; then
            echo "No open PR found for this branch."
            exit 1  # or handle as needed
          fi
          echo "PR title: $PR_TITLE"
        env:
          GH_TOKEN: ${{ github.token }}
